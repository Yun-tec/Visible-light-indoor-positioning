# Visible-light-indoor-positioning
存放大学毕设项目——可见光室内定位相关代码及其说明文件
本人已于24年毕业，且不再从事相关行业工作，以下内容皆为回忆，如果错漏，敬请指正
# 前言
本项目需要有基础的单片机知识和电路设计能力。如没有，请自学或者联系相关专业同学。
所涉及的都很简单，请放心大胆的复刻
# 请注意
①该定位系统采用的是无线通信，并未涉及可见光通信，每次点亮一个led
②接受端与led距离估算采用的是强度估计（后文展开介绍），并没有用朗伯模型建模分析
③仅是本科毕设，勿苛求太多
④没有放到Github平台的东西就是没有

# 原理简述
在可见光室内定位系统里，特指本项目设计，从结果倒推，计算出坐标一共需要两个数据：
1.多个led坐标，2接收端距离距离每个led坐标的直线距离
## 第①个需求分析，
如用无线串口即可轻松实现，发射端在连接led基础上，额外增加一个无线通信模块与接收端通信，每次点亮led前发送信号说明点亮的led序号，接收端根据序号即可确定当前led坐标。
## 第②个需求分析
通过观察不难发现，当仅有一个点光源时，其会在下方平面投影出圆形光圈，且光圈内光强分布应该呈现出环形差异。再观察出该性质后，通过额外增设一个光强测量设备，记录光强分布即可得出设备距离光圈圆心的长度，在高度固定的情况下，通过直角三角形原理，已知两个直角边，即可求出斜边，进而得知接受端和led的距离。

## 定位算法数学原理
采用的是多边定位算法，直接带入数据即可，不用纠结

# 文件介绍
在理清楚原理后，下面进入实操环节
## RSSLED
该文件夹应该是当时想先用c语言测试下算法而编写的，涉及到随机生成定位等数据，并希望能优化算法，但后来发现单片机受限运存，并不支持这些。
## 实物图
该文件夹存放当时一些照片材料，值得注意的是其中的发射端连接多个led的电路板，该电路板系朋友所制，电路图早已遗失，据他所说设计的很简单，初衷也是因为单片机带不动那么多led，所以增设电路板。
## 毕业答辩PPT
里面包含精炼的内容，诸如设备的流程图，设备涉及的具体模块，想复刻的朋友建议研读
## 硬件代码
三个硬件代码均在此列。单片机用的是stm32f103c8t6，其他模块是在网上买的，当时涉及太多，同样功能也买了不止一个，具体最终用的是哪个也无从考证了。
所以代码也仅供参考，不同设备所用模板代码也不太一样。好在代码量也不大，理解毕设的设计理念之后，复刻也是比较简单的。
